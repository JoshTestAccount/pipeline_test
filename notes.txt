# UPDATE PYPI PACKAGE

## Pseudocode
dev updates values in setup_batchkit.py 
cd batch-processing-kit

### Setup Python virtual environment 
apt-get install -y python3-venv
python3 -m venv awesome_venv

### Publishing Python package 
./setup_batchkit.py sdist bdist_wheel
py -m pip install --upgrade twine
twine check dist/*
twine upload dist/* -u __token__ -p pypi-AgEIcHlwaS5vcmcCJDM3NDI0Yjk1LThiOTYtNGU0My1iNGRiLTQwYTEwOTAzN2JhMwACJXsicGVybWlzc2lvbnMiOiAidXNlciIsICJ2ZXJzaW9uIjogMX0AAAYgoh65u3dJ8iu9PGExJIsLg4u9KH6N1Q4SbeXtEQoxw9A

### Creating Azure Key Vault 
az account set --subscription 249b89d4-f93b-4070-88bb-3d3d9e59f7d4
az config set defaults.location=westus2
az keyvault create --name JoshKeyVaultTest --resource-group JoshAksTest
az keyvault secret set --name "testkey" --value "testpassword" --vault-name JoshKeyVaultTest



### Creating and temporarily storing Docker image 
docker build -t test_repo .
docker login joshcacr.azurecr.io -u joshcacr -p ynWDQaKb0a1jNAWSaMvY/bRm91oHx2da
docker tag test_repo joshcacr.azurecr.io/test_repo
docker push joshcacr.azurecr.io/test_repo

### Testing and publishing Docker image
docker pull joshcacr.azurecr.io/test_repo:latest


EXTRA
set HOME variable to parent directory of .pypirc directory
Configure .pypirc file and place in .pypirc directory 
ensure "wheel" is installed
cd batch-processing-kit
py -m twine upload --repository test_pkg dist/*

### pipe_line test repository stored at https://repos.opensource.microsoft.com/orgs/microsoft/repos/pipeline_test